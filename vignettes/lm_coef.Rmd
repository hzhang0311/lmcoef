---
title: "lm_coef"
output: html_vignette
vignette: >
  %\VigbetteIndexEntry{lm_coef tutorial}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(lmcoef)
```

Assume now we have a vector for the response variable, `y`, with length of n, and a n*m matrix for the independent variable `x`.

```{r}
n = 1000
m = 7 # number of parameters
y = rnorm(n)
x = matrix(rnorm(m * n), n, m)
```

To use the function `lm_coef`:

```{r}
lm_coef(y,x)
```

To compare the result for the estimated coefficients of this new implement with the original `lm` function:

```{r}
lm_est = summary(lm(y~x))$coefficients
lm_coef_est = lm_coef(y,x)$coefficients

row.names(lm_est) <- NULL
colnames(lm_est) <- NULL

row.names(lm_coef_est) <- NULL
colnames(lm_coef_est) <- NULL

all.equal(lm_est, lm_coef_est)
```

To compare the result for the residuals' quantile of this new implement with the original `lm` function:

```{r}
lm_res = quantile(summary(lm(y~x))$residuals)
lm_coef_res = lm_coef(y,x)$residuals

all.equal(lm_res, lm_coef_res)
```

To compare the speed of these two implements:

```{r}
library(microbenchmark)
microbenchmark(summary(lm(y~x))$coefficients, lm_coef(y,x))
```
